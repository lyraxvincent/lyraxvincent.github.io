<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=content-type content="text/html"><meta name=viewport content="width=device-width,initial-scale=1"><title itemprop=name>Efficient Python and Machine Learning Environment Setup with Pyscaffold, Poetry, and Pyenv | Vincent N.</title><meta property="og:title" content="Efficient Python and Machine Learning Environment Setup with Pyscaffold, Poetry, and Pyenv | Vincent N."><meta name=twitter:title content="Efficient Python and Machine Learning Environment Setup with Pyscaffold, Poetry, and Pyenv | Vincent N."><meta itemprop=name content="Efficient Python and Machine Learning Environment Setup with Pyscaffold, Poetry, and Pyenv | Vincent N."><meta name=application-name content="Efficient Python and Machine Learning Environment Setup with Pyscaffold, Poetry, and Pyenv | Vincent N."><meta property="og:site_name" content><meta name=description content="Portfolio website."><meta itemprop=description content="Portfolio website."><meta property="og:description" content="Portfolio website."><meta name=twitter:description content="Portfolio website."><meta property="og:locale" content="en"><meta name=language content="en"><meta itemprop=image content="https://lyraxvincent.github.io/"><meta property="og:image" content="https://lyraxvincent.github.io/"><meta name=twitter:image content="https://lyraxvincent.github.io/"><meta name=twitter:image:src content="https://lyraxvincent.github.io/"><meta name=generator content="Hugo 0.115.4"><link rel=canonical href=https://lyraxvincent.github.io/post/efficient-python-and-machine-learning-environment-setup-with-pyscaffold/><link href=/style.min.840eada6dfddec7b8ccfcf867f039bf80b1f16a265ec6e01dc553a3dddc9d509.css rel=stylesheet><link href=/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css rel=stylesheet><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/icons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/icons/favicon-16x16.png><link rel=mask-icon href=/icons/safari-pinned-tab.svg><link rel="shortcut icon" href=/favicon.ico><link rel=manifest href=https://lyraxvincent.github.io/site.webmanifest><meta name=msapplication-config content="/browserconfig.xml"><meta name=msapplication-TileColor content="#2d89ef"><meta name=theme-color content="#434648"><link rel=icon type=image/svg+xml href=/icons/favicon.svg></head><body data-theme class=notransition><script src=/js/theme.min.8961c317c5b88b953fe27525839672c9343f1058ab044696ca225656c8ba2ab0.js integrity="sha256-iWHDF8W4i5U/4nUlg5ZyyTQ/EFirBEaWyiJWVsi6KrA="></script><div class=navbar role=navigation><nav class=menu aria-label="Main Navigation"><a href=https://lyraxvincent.github.io/ class=logo><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><title>Home</title><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></a><input type=checkbox id=menu-trigger class=menu-trigger>
<label for=menu-trigger><span class=menu-icon><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentcolor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7H3.40726"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M.5 12.5V1.5c0-.552285.447715-1 1-1h11C13.0523.5 13.5.947715 13.5 1.5v11C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C.947715 13.5.5 13.0523.5 12.5z"/></svg></span></label><div class=trigger><ul class=trigger-container><li><a class=menu-link href=/>Home</a></li><li><a class=menu-link href=/post/>Posts</a></li><li><a class=menu-link href=/about/>About</a></li><li><a class=menu-link href=/contact/>Contact</a></li><li class=menu-separator><span>|</span></li></ul><a id=mode href=#><svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg><svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg></a></div></nav></div><div class="wrapper post"><main class=page-content aria-label=Content><article><header class=header><h1 class=header-title>Efficient Python and Machine Learning Environment Setup with Pyscaffold, Poetry, and Pyenv</h1><div class=post-meta><time datetime=2023-07-14T20:58:49+05:30 itemprop=datePublished>Jul 14, 2023</time></div></header><details class=toc><summary><b>Table of Contents</b></summary><nav id=TableOfContents><ul><li><ul><li><a href=#tools>Tools</a></li><li><a href=#project-directory-structure>Project directory structure</a></li><li><a href=#dependency-management-versioning-and-publishing>Dependency management, versioning and publishing.</a></li><li><a href=#specifying-python-version>Specifying Python version</a></li><li><a href=#best-practices>Best practices?</a></li></ul></li></ul></nav></details><div class=page-content><p>Setting up development environment for python packages and machine learning projects</p><p align=center><img src=/img/blog/OscarYildiz_essential.jpeg width=600 height=350 alt=jpeg></p><p>Setting up a python environment for machine learning can be tedious especially because we want to go right into getting our hands dirty with the data and ML algorithms, whether it&rsquo;s just a project directory or you want to package your machine learning code. Python packaging has been made easier by a set of automation tools, in this article, I&rsquo;ll be exploring what I&rsquo;ve found to be a rewarding approach of how best to structure a development environment using these readily available tools. This set me up for lessons that led to success.</p><h2 id=tools>Tools</h2><ul><li><a href=https://pyscaffold.org/en/stable/>Pyscaffold</a> - project files generator</li><li><a href=https://python-poetry.org/docs/>Poetry</a> - dependency management</li><li><a href=https://github.com/pyenv/pyenv>Pyenv</a> - python version management</li></ul><p>To install and get started with these tools, see their linked pages above.</p><h2 id=project-directory-structure>Project directory structure</h2><p><a href=https://pyscaffold.org/en/stable/>Pyscaffold</a> helps us generate project files with just one command. Assuming we want to name our project/ package “mlproject”:</p><pre><code>putup mlproject
</code></pre><p>This generates the following directory structure, with all the files needed for any project or repository. You don’t have to manually create general files like README.md, .gitignore and the others:</p><p align=center><img src=/img/blog/essential_dir_structure.png width=600 height=350 alt=jpeg></p><p>Python scripts go to <code>src/mlproject</code> directory and one can import functions from the package by:</p><pre><code>from mlproject.script import func
</code></pre><p>A typical machine learning project would have <code>data</code> and <code>notebooks</code> folders. Create these in the project’s root directory.</p><h2 id=dependency-management-versioning-and-publishing>Dependency management, versioning and publishing.</h2><p>Among available open source tools, this section will focus on poetry given the simplicity and its ease of use.
<a href=https://python-poetry.org/docs/>Poetry</a> will automatically create a virtual environment and help in managing dependencies for your project. To set this up we initialize poetry with:</p><pre><code>poetry init
</code></pre><p>This generates two files:</p><ul><li>pyproject.toml - this keeps record of dependencies</li><li>poetry.lock - keeps version information of the dependencies</li></ul><p>Installing/ adding subsequent dependencies will be done by:</p><pre><code>poetry add &lt;numpy&gt;
</code></pre><p>Package development is a gradual process, you want to keep log of major and minor developments for your package. Poetry helps you achieve this effortlessly. On top of semantic versioning approach, poetry allows for <code>patch</code>, <code>minor</code>, <code>major</code>, <code>prepatch</code>, <code>preminor</code>, <code>premajor</code> and <code>prerelease</code> version bumps as seen on the <a href=https://python-poetry.org/docs/cli/#version>docs</a>.
To bump the version after adding a patch for example:</p><pre><code>poetry version patch
</code></pre><p>And this bumps the version number automatically.
Poetry also makes publishing packages to <a href=https://pypi.org/>pypi</a> very easy.
For more usage instructions and best practices of effectively using poetry refer to its documentation.</p><h2 id=specifying-python-version>Specifying Python version</h2><p>Apart from specifying package versions you want to specify a python version for your project. This can be achieved by using <a href=https://github.com/pyenv/pyenv>pyenv</a> to install the specific version of python. Specify the version inside your project using poetry by simply doing:</p><pre><code>poetry env use &lt;path/to/python/version&gt;
# eg. poetry env use /home/vincent/.pyenv/versions/3.8.10/bin/python
</code></pre><p>This makes sure that when you activate poetry shell it uses this specified python version.
NOTE: Doing it otherwise eg. by <code>pyenv local 3.8.10</code> will not have poetry point to that python version.</p><h2 id=best-practices>Best practices?</h2><p>We see a tests directory among the auto-generated files, <a href=https://docs.pytest.org/en/7.1.x/contents.html>pytest</a> is a great tool for writing tests for your package and it integrates well with the above listed tools.</p><p>Another cool feature for poetry is how well it helps one separate development packages with actual dependencies used by your package, so that when you publish your package, other users don’t install unneeded packages used in development for example jupyterlab which you only use when doing development inside the notebooks, your package never calls package jupyterlab anywhere.
We separate these by specifying an argument <code>--dev</code> :</p><pre><code>poetry add --dev jupyterlab
</code></pre><p>For more on this see the section in poetry documentation <a href=https://python-poetry.org/docs/master/managing-dependencies/>here</a>.</p><p>Lastly, tools such as <a href=https://black.readthedocs.io/en/stable/>black</a> and <a href=https://pylint.pycqa.org/en/latest/>pylint</a> are great to explore to write well structured code that follow good software engineering principles.</p></div></article></main></div><footer class=footer><span class=footer_item></span>&nbsp;<div class=footer_social-icons><a href=https://github.com/lyraxvincent target=_blank rel="noopener noreferrer me" title=Github><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a href=https://twitter.com/lyraxvincent target=_blank rel="noopener noreferrer me" title=Twitter><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a><a href=https://www.linkedin.com/in/vincent-njonge-528070178/ target=_blank rel="noopener noreferrer me" title=Linkedin><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a><a href=mailto:njongevincent@gmail.com target=_blank rel="noopener noreferrer me" title=Email><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 21" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a><a href=https://stackoverflow.com/users/11856808/lyrax target=_blank rel="noopener noreferrer me" title=Stackoverflow><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2.913 16.041v6.848h17.599v-6.848M7.16 18.696h8.925M7.65 13.937l8.675 1.8M9.214 9.124l8.058 3.758M12.086 4.65l6.849 5.66M15.774 1.111l5.313 7.162"/></svg></a></div><small class=footer_copyright>© 2023 Vincent Njonge.
Powered by <a href=https://github.com/hugo-sid/hugo-blog-awesome target=_blank rel="noreferrer noopener">Hugo blog awesome</a>
theme on
<a href=https://gohugo.io target=_blank rel="noreferrer noopener">Hugo</a>.</small></footer><a href=# title="Go to top" id=totop><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentcolor" stroke="currentcolor" viewBox="0 96 960 960"><path d="M283 704.739 234.261 656 480 410.261 725.739 656 677 704.739l-197-197-197 197z"/></svg></a><script src=https://lyraxvincent.github.io/js/main.min.35f435a5d8eac613c52daa28d8af544a4512337d3e95236e4a4978417b8dcb2f.js integrity="sha256-NfQ1pdjqxhPFLaoo2K9USkUSM30+lSNuSkl4QXuNyy8="></script></body></html>